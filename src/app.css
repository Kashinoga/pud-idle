@import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600&display=swap');

:root {
	--background: #e8edf6;
	--foreground: #0f172a;
	--muted: #4b5563;
	--primary: #2563eb;
	--primary-soft: rgba(37, 99, 235, 0.12);
	--accent: #22d3ee;
	--surface: rgba(255, 255, 255, 0.72);
	--surface-strong: rgba(255, 255, 255, 0.82);
	--surface-border: rgba(15, 23, 42, 0.08);
	--shadow-soft: 0 25px 60px rgba(15, 23, 42, 0.15);
	--shadow-sharp: 0 12px 30px rgba(15, 23, 42, 0.12);
	--blur: 18px;
	--radius-lg: 18px;
	--radius-sm: 12px;
	--top-bar-height: 64px;
	--sidebar-width: 260px;
	--panel-width: 320px;
	--content-padding-top: 1rem;
	--content-padding-bottom: 1.25rem;
	--content-padding-sides: 1.1rem;

	/* View-specific accent colors */
	--view-home: var(--accent);
	--view-email: var(--primary);
	--view-calendar: #34d399;
	--view-settings: #a78bfa;
	--view-woodcutting: #d97706;
	--view-inventory: #8b5cf6;
	--view-home-soft: rgba(34, 211, 238, 0.12);
	--view-email-soft: var(--primary-soft);
	--view-calendar-soft: rgba(52, 211, 153, 0.12);
	--view-settings-soft: rgba(167, 139, 250, 0.12);
	--view-woodcutting-soft: rgba(217, 119, 6, 0.12);
	--view-inventory-soft: rgba(139, 92, 246, 0.12);
	/* Glow colors for active nav shadows */
	--view-home-glow: rgba(34, 211, 238, 0.45);
	--view-email-glow: rgba(37, 99, 235, 0.35);
	--view-calendar-glow: rgba(52, 211, 153, 0.35);
	--view-settings-glow: rgba(167, 139, 250, 0.35);
	--view-woodcutting-glow: rgba(217, 119, 6, 0.4);
	--view-inventory-glow: rgba(139, 92, 246, 0.4);
}

[data-theme='dark'] {
	--background: #0b1220;
	--foreground: #e5e7eb;
	--muted: #94a3b8;
	--primary: #60a5fa;
	--primary-soft: rgba(96, 165, 250, 0.12);
	--accent: #34d399;
	--surface: rgba(17, 24, 39, 0.72);
	--surface-strong: rgba(17, 24, 39, 0.9);
	--surface-border: rgba(255, 255, 255, 0.08);
	--shadow-soft: 0 20px 60px rgba(0, 0, 0, 0.4);
	--shadow-sharp: 0 10px 28px rgba(0, 0, 0, 0.32);

	/* View-specific accent colors */
	--view-home: var(--accent);
	--view-email: var(--primary);
	--view-calendar: #34d399;
	--view-settings: #a78bfa;
	--view-woodcutting: #f59e0b;
	--view-inventory: #a78bfa;
	--view-home-soft: rgba(34, 211, 238, 0.12);
	--view-email-soft: var(--primary-soft);
	--view-calendar-soft: rgba(52, 211, 153, 0.12);
	--view-settings-soft: rgba(167, 139, 250, 0.12);
	--view-woodcutting-soft: rgba(245, 158, 11, 0.12);
	--view-inventory-soft: rgba(167, 139, 250, 0.12);
	/* Glow colors for active nav shadows */
	--view-home-glow: rgba(34, 211, 238, 0.45);
	--view-email-glow: rgba(96, 165, 250, 0.4);
	--view-calendar-glow: rgba(52, 211, 153, 0.4);
	--view-settings-glow: rgba(167, 139, 250, 0.4);
	--view-woodcutting-glow: rgba(245, 158, 11, 0.45);
	--view-inventory-glow: rgba(167, 139, 250, 0.4);
}

* {
	box-sizing: border-box;
}

body {
	margin: 0;
	min-height: 100vh;
	font-family:
		'Space Grotesk',
		'DM Sans',
		'Segoe UI',
		system-ui,
		-apple-system,
		sans-serif;
	background:
		radial-gradient(120% 120% at 20% 20%, rgba(34, 211, 238, 0.12), transparent),
		radial-gradient(120% 120% at 80% 0%, rgba(37, 99, 235, 0.14), transparent),
		radial-gradient(120% 120% at 50% 80%, rgba(52, 211, 153, 0.1), transparent), var(--background);
	color: var(--foreground);
	overflow: hidden;
	transition:
		background 220ms ease,
		color 220ms ease;
}

a {
	color: var(--primary);
	text-decoration: none;
}

button {
	font: inherit;
	border: 1px solid var(--surface-border);
	background: var(--surface);
	color: var(--foreground);
	border-radius: var(--radius-sm);
	padding: 0.55rem 0.9rem;
	backdrop-filter: blur(var(--blur));
	box-shadow: var(--shadow-sharp);
	cursor: pointer;
	transition:
		transform 160ms ease,
		box-shadow 160ms ease,
		background 160ms ease;
}

button:hover {
	transform: translateY(-1px);
	box-shadow: var(--shadow-soft);
}

button:active {
	transform: translateY(0);
}

button.ghost-button {
	background: linear-gradient(120deg, var(--surface), var(--surface-strong));
	border-color: var(--surface-border);
}

button.primary-button {
	background: linear-gradient(135deg, var(--primary), var(--accent));
	color: #0b1220;
	border: none;
	box-shadow: 0 10px 30px rgba(37, 99, 235, 0.3);
}

.app-shell {
	position: relative;
	min-height: 100vh;
	padding-top: var(--top-bar-height);
	padding-bottom: var(--top-bar-height);
	color: var(--foreground);
}

.ambient-glow {
	position: fixed;
	inset: 0;
	pointer-events: none;
	background:
		radial-gradient(45% 45% at 15% 30%, rgba(34, 211, 238, 0.14), transparent),
		radial-gradient(35% 35% at 85% 20%, rgba(37, 99, 235, 0.2), transparent),
		radial-gradient(30% 30% at 60% 80%, rgba(52, 211, 153, 0.12), transparent);
	opacity: 0.85;
	z-index: 0;
}

.mobile-top-bar {
	position: fixed;
	top: 0;
	left: 0;
	right: 0;
	height: var(--top-bar-height);
	display: flex;
	align-items: center;
	gap: 0.75rem;
	padding: 0.65rem 1rem;
	background: linear-gradient(120deg, var(--surface), var(--surface-strong));
	border-bottom: 1px solid var(--surface-border);
	backdrop-filter: blur(var(--blur));
	box-shadow: var(--shadow-soft);
	z-index: 18;
}

.top-bar {
	position: fixed;
	left: 0;
	right: 0;
	bottom: 0;
	height: var(--top-bar-height);
	display: flex;
	align-items: center;
	gap: 0.75rem;
	padding: 0.65rem 1rem;
	background: linear-gradient(120deg, var(--surface), var(--surface-strong));
	border-top: 1px solid var(--surface-border);
	backdrop-filter: blur(var(--blur));
	box-shadow: var(--shadow-soft);
	z-index: 20;
}

.top-bar .brand {
	font-weight: 600;
	letter-spacing: 0.4px;
}

@media (max-width: 767px) {
	.top-bar .brand {
		display: none;
	}
}

.top-bar .nav-links {
	display: none;
	gap: 0.35rem;
	flex-wrap: wrap;
	align-items: center;
}

.top-bar .bar-actions {
	display: flex;
	gap: 0.5rem;
	align-items: center;
}

@media (min-width: 768px) {
	.top-bar .bar-actions {
		margin-left: auto;
	}
}

.top-bar .pill {
	border-radius: 999px;
	padding: 0.4rem 0.8rem;
	border: 1px solid var(--surface-border);
	background: var(--surface);
}

.sidebar {
	position: fixed;
	top: 0;
	left: 0;
	padding-top: 0.5rem;
	padding-bottom: var(--top-bar-height);
	margin-top: var(--top-bar-height);
	width: min(80vw, var(--sidebar-width));
	height: calc(100vh - var(--top-bar-height));
	background: var(--surface);
	border-right: 1px solid var(--surface-border);
	backdrop-filter: blur(var(--blur));
	box-shadow: var(--shadow-soft);
	transform: translateX(-100%);
	transition: transform 200ms ease;
	will-change: transform;
	z-index: 10;
	overflow: auto;
}

.sidebar.is-open {
	transform: translateX(0);
}

.sidebar .section-title {
	padding: 0 1rem 0.5rem;
	font-weight: 600;
	color: var(--muted);
}

.sidebar .section-sub-title {
	padding: 0 1rem 0.75rem;
	font-size: 0.85rem;
	font-style: italic;
	color: var(--muted);
	opacity: 0.8;
}

.sidebar .nav-stack {
	display: flex;
	flex-direction: column;
	gap: 0.5rem;
	padding: 0 1rem 1.5rem;
}

.sidebar .nav-item {
	padding: 0.65rem 0.85rem;
	border-radius: var(--radius-sm);
	background: var(--primary-soft);
	border: 1px solid var(--surface-border);
	box-shadow: var(--shadow-sharp);
	color: var(--foreground);
	display: block;
	width: 100%;
	text-align: left;
	cursor: pointer;
	transition:
		transform 160ms ease,
		box-shadow 160ms ease,
		background 160ms ease;
}

.sidebar .nav-item:hover {
	transform: translateY(-1px);
	box-shadow: var(--shadow-soft);
	background: var(--primary-soft);
}

/* Active nav item styling tied to current view */
.sidebar .nav-item.is-active {
	background: var(--surface-strong);
	box-shadow: var(--shadow-soft);
	font-weight: 600;
}

.sidebar .nav-item.is-active.nav-home {
	background: var(--view-home-soft);
	box-shadow:
		0 10px 26px var(--view-home-glow),
		var(--shadow-soft);
}

.sidebar .nav-item.is-active.nav-email {
	background: var(--view-email-soft);
	box-shadow:
		0 10px 26px var(--view-email-glow),
		var(--shadow-soft);
}

.sidebar .nav-item.is-active.nav-calendar {
	background: var(--view-calendar-soft);
	box-shadow:
		0 10px 26px var(--view-calendar-glow),
		var(--shadow-soft);
}

.sidebar .nav-item.is-active.nav-settings {
	background: var(--view-settings-soft);
	box-shadow:
		0 10px 26px var(--view-settings-glow),
		var(--shadow-soft);
}

.sidebar .nav-item.is-active.nav-woodcutting {
	background: var(--view-woodcutting-soft);
	box-shadow:
		0 10px 26px var(--view-woodcutting-glow),
		var(--shadow-soft);
}

.sidebar .nav-item.is-active.nav-inventory {
	background: var(--view-inventory-soft);
	box-shadow:
		0 10px 26px var(--view-inventory-glow),
		var(--shadow-soft);
}

.content-area {
	position: relative;
	padding: var(--content-padding-top) var(--content-padding-sides) var(--content-padding-bottom);
	overflow-y: auto;
	overflow-x: hidden;
	z-index: 1;
	margin: 0;
	display: flex;
	flex-direction: column;
	transition: margin-left 200ms ease;
}

.content-header {
	display: flex;
	flex-direction: column;
	gap: 0.35rem;
	margin-bottom: 1rem;
}

.content-header h1 {
	margin: 0;
	font-size: 1.6rem;
}

.content-header p {
	margin: 0;
	color: var(--muted);
	max-width: 60ch;
}

.card-grid {
	display: grid;
	grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
	gap: 1rem;
}

.glass-card {
	background: var(--surface);
	border-radius: var(--radius-lg);
	border: 1px solid var(--surface-border);
	box-shadow: var(--shadow-soft);
	backdrop-filter: blur(var(--blur));
	padding: 1rem;
	min-height: 140px;
	display: flex;
	flex-direction: column;
	gap: 0.45rem;
}

.glass-card .label {
	font-size: 0.85rem;
	text-transform: uppercase;
	color: var(--muted);
	letter-spacing: 0.08em;
}

.glass-card .title {
	font-weight: 600;
}

.glass-card p {
	margin: 0;
	color: var(--muted);
	line-height: 1.5;
}

.overlay-panel {
	position: fixed;
	top: 0;
	right: 0;
	margin-top: var(--top-bar-height);
	width: min(82vw, var(--panel-width));
	height: calc(100vh - var(--top-bar-height));
	background: var(--surface);
	border-left: 1px solid var(--surface-border);
	backdrop-filter: blur(var(--blur));
	box-shadow: var(--shadow-soft);
	transform: translateX(100%);
	transition: transform 200ms ease;
	z-index: 15;
	overflow: auto;
	padding: 0;
}

.overlay-panel.is-open {
	transform: translateX(0);
}

.overlay-panel .panel-header {
	display: flex;
	justify-content: space-between;
	align-items: center;
	margin-bottom: 0.5rem;
	padding: 1rem;
}

.overlay-panel .close-button {
	display: flex;
	align-items: center;
	justify-content: center;
	background: linear-gradient(120deg, var(--surface), var(--surface-strong));
	border: 1px solid var(--surface-border);
	border-radius: var(--radius-md);
	color: var(--foreground);
	padding: 0.5rem 1rem;
	cursor: pointer;
	box-shadow: none;
	transition: all 160ms ease;
	flex-shrink: 0;
	font-weight: 500;
	font-size: 0.95rem;
}

.overlay-panel .close-button:hover {
	background: var(--primary-soft);
	border-color: var(--primary);
	color: var(--foreground);
	transform: none;
	box-shadow: none;
}

.overlay-panel .panel-body {
	color: var(--muted);
	line-height: 1.5;
	display: grid;
	gap: 0.75rem;
	padding: 0 1rem 1rem 1rem;
}

.overlay-panel .panel-footer {
	display: flex;
	align-items: center;
	justify-content: flex-end;
	height: var(--top-bar-height);
	padding: 0 1rem;
	border-top: 1px solid var(--surface-border);
	background: var(--surface-strong);
}

.mobile-only {
	display: none;
}

/* Item Detail Section in Panel */
.item-detail-section {
	display: flex;
	flex-direction: column;
	align-items: center;
	gap: 1rem;
	padding: 1.5rem;
	background: var(--surface-strong);
	border-radius: var(--radius-lg);
	margin-bottom: 1rem;
	border: 1px solid var(--view-inventory);
	box-shadow: 0 0 20px var(--view-inventory-glow);
}

.item-detail-icon {
	font-size: 3.5rem;
	line-height: 1;
}

.item-detail-name {
	font-size: 1.5rem;
	font-weight: 700;
	color: var(--foreground);
}

.item-detail-count {
	display: flex;
	gap: 0.5rem;
	align-items: baseline;
	font-size: 1rem;
}

.item-detail-count .label {
	color: var(--text-secondary);
	font-weight: 500;
}

.item-detail-count .value {
	font-size: 1.25rem;
	font-weight: 700;
	color: var(--view-inventory);
}

@media (max-width: 767px) {
	.overlay-panel {
		height: calc(100vh - var(--top-bar-height) * 2);
	}

	.overlay-panel .panel-header .close-button {
		display: none;
	}

	.overlay-panel .panel-footer {
		position: sticky;
		bottom: 0;
	}

	.mobile-only {
		display: block;
	}
}

/* Reusable container for apps/views in main-content area */
.view-app-container {
	/* Mobile: subtract top bar twice (top and bottom bars) */
	max-height: calc(
		100vh - var(--top-bar-height) * 2 - var(--content-padding-top) - var(--content-padding-bottom)
	);
}

@media (min-width: 768px) {
	.view-app-container {
		/* Desktop: subtract top bar once (only at top) */
		max-height: calc(
			100vh - var(--top-bar-height) - var(--content-padding-top) - var(--content-padding-bottom)
		);
	}
}

/* For content-area itself (padding already applied by content-area class) */
.view-content-max-height {
	/* Mobile: subtract top bar twice (top and bottom bars) */
	max-height: calc(100vh - var(--top-bar-height) * 2);
}

@media (min-width: 768px) {
	.view-content-max-height {
		/* Desktop: subtract top bar once (only at top) */
		max-height: calc(100vh - var(--top-bar-height));
	}
}

.chip-row {
	display: flex;
	flex-wrap: wrap;
	gap: 0.35rem;
}

.chip {
	padding: 0.35rem 0.65rem;
	border-radius: 999px;
	border: 1px solid var(--surface-border);
	background: var(--surface-strong);
	font-size: 0.85rem;
}

.metric-row {
	display: grid;
	grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
	gap: 0.6rem;
}

.metric {
	padding: 0.75rem;
	border-radius: var(--radius-sm);
	border: 1px solid var(--surface-border);
	background: var(--primary-soft);
	box-shadow: var(--shadow-sharp);
	font-weight: 600;
}

.divider {
	border: none;
	height: 1px;
	background: var(--surface-border);
}

.section-block {
	background: var(--surface);
	border-radius: var(--radius-lg);
	border: 1px solid var(--surface-border);
	box-shadow: var(--shadow-soft);
	padding: 1rem;
	backdrop-filter: blur(var(--blur));
}

.section-block h3 {
	margin: 0 0 0.4rem;
}

.section-block p {
	margin: 0;
	color: var(--muted);
	line-height: 1.5;
}

.scrollable {
	overflow: auto;
	max-height: 100%;
}

::-webkit-scrollbar {
	width: 8px;
}

::-webkit-scrollbar-track {
	background: transparent;
}

::-webkit-scrollbar-thumb {
	background: rgba(15, 23, 42, 0.16);
	border-radius: 999px;
}

[data-theme='dark'] ::-webkit-scrollbar-thumb {
	background: rgba(148, 163, 184, 0.25);
}

@media (min-width: 768px) {
	.app-shell {
		padding-bottom: 0;
		padding-top: var(--top-bar-height);
	}

	.mobile-top-bar {
		display: none;
	}

	.top-bar {
		top: 0;
		bottom: auto;
		border-top: none;
		border-bottom: 1px solid var(--surface-border);
	}

	.top-bar .nav-links {
		display: flex;
	}

	.sidebar {
		margin-top: var(--top-bar-height);
		width: var(--sidebar-width);
		height: calc(100vh - var(--top-bar-height));
		padding-bottom: 0.5rem;
	}

	.overlay-panel {
		margin-top: var(--top-bar-height);
		width: var(--panel-width);
		height: calc(100vh - var(--top-bar-height));
	}

	.app-shell.sidebar-open .content-area {
		margin-left: var(--sidebar-width);
		padding-left: 1rem;
	}

	.content-area {
		max-height: calc(100vh - var(--top-bar-height));
	}
}

@media (min-width: 1100px) {
	.content-header h1 {
		font-size: 1.85rem;
	}
}

/* Additional utility classes */
.sidebar-footer {
	padding: 1rem;
}

.sidebar-footer p {
	color: var(--muted);
	font-size: 0.9rem;
	line-height: 1.5;
}

.sidebar-footer p + p {
	margin-top: 0.5rem;
}

.section-block-spaced {
	margin-top: 1rem;
	display: grid;
	gap: 0.75rem;
}

.card-grid-spaced {
	margin-top: 1rem;
}

.panel-paragraph {
	margin-top: 0.5rem;
}
